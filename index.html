<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LifeMeter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
body{
  margin:0;
  font-family: Arial, Helvetica, sans-serif;
  background:#0f172a;
  color:#e5e7eb;
}

/* ---------- INPUT PAGE ---------- */
.input-page{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.input-box{
  background:#111827;
  padding:25px;
  width:320px;
  border-radius:12px;
}
.input-box h2{
  text-align:center;
  margin-bottom:20px;
}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:6px;
  border:none;
  font-size:15px;
}
input{
  background:#1f2933;
  color:#fff;
}
button{
  background:#2563eb;
  color:white;
  cursor:pointer;
}

/* ---------- SECTIONS ---------- */
.section{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.box{
  background:#111827;
  width:90%;
  max-width:900px;
  padding:30px;
  border-radius:18px;
  position:relative;
}

h1{
  text-align:center;
  margin-bottom:25px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:15px;
  text-align:center;
}

.unit{
  background:#1f2933;
  padding:15px;
  border-radius:10px;
}
.unit span{
  display:block;
  font-size:28px;
  font-weight:bold;
}
.unit small{
  font-size:12px;
  color:#9ca3af;
}

/* ---------- PROGRESS ---------- */
.progress-wrap{
  width:80%;
  margin:30px auto;
}
.progress-bar{
  height:14px;
  background:#1f2933;
  border-radius:10px;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  background:#22c55e;
  width:0%;
}

/* ---------- QUOTES ---------- */
.quote{
  text-align:center;
  margin-top:25px;
  font-size:16px;
  opacity:0.85;
}

/* ---------- SCREENSHOT ---------- */
.shot{
  position:absolute;
  top:15px;
  right:15px;
  background:#2563eb;
  border:none;
  color:#fff;
  padding:8px 12px;
  border-radius:6px;
  cursor:pointer;
  font-size:12px;
}

/* ---------- FOOTER ---------- */
.footer{
  position:absolute;
  bottom:10px;
  right:15px;
  font-size:12px;
  opacity:0.6;
}
</style>
</head>

<body>

<!-- INPUT -->
<div class="input-page" id="inputPage">
  <div class="input-box">
    <h2>LifeMeter</h2>
    <input id="name" placeholder="Your Name (Optional)">
    <input type="date" id="dob">
    <button onclick="start()">Start</button>
    <p id="error" style="color:#f87171;font-size:13px;"></p>
  </div>
</div>

<!-- REMAINING -->
<div class="section" id="remainSec" style="display:none;">
  <div class="box" id="remainBox">
    <button class="shot" onclick="snap('remainBox')">Screenshot</button>
    <h1>Remaining Life</h1>
    <div class="grid" id="remaining"></div>

    <div class="progress-wrap">
      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>
    </div>

    <div class="quote" id="quote"></div>
  </div>
</div>

<!-- LIVED -->
<div class="section" id="livedSec" style="display:none;">
  <div class="box" id="livedBox">
    <button class="shot" onclick="snap('livedBox')">Screenshot</button>
    <h1>Lived Life</h1>
    <div class="grid" id="lived"></div>
    <div class="footer">Made by Umair Hayat</div>
  </div>
</div>

<script>
const quotes=[
"Time is the most valuable currency.",
"Every second shapes your future.",
"Your life is written in moments.",
"Do not waste what never returns.",
"Life moves forward, never backward.",
"Moments today become memories tomorrow.",
"Time reveals the truth of discipline.",
"Your age is proof of survival.",
"Seconds define consistency.",
"Life rewards awareness of time."
];

let q=0;
setInterval(()=>{
  document.getElementById("quote").innerText=quotes[q++%quotes.length];
},90000);

function start(){
  const dob=document.getElementById("dob").value;
  const error=document.getElementById("error");
  if(!dob){error.innerText="Please select date of birth.";return;}

  const birth=new Date(dob);
  const now=new Date();

  if(birth>now){error.innerText="Date of birth cannot be in future.";return;}
  if(birth.getFullYear()<1800){error.innerText="Invalid year entered.";return;}

  document.getElementById("inputPage").style.display="none";
  document.getElementById("remainSec").style.display="flex";
  document.getElementById("livedSec").style.display="flex";

  setInterval(()=>update(birth),1000);
}

function update(birth){
  const now=new Date();
  const totalYears=60;

  const livedSec=Math.floor((now-birth)/1000);
  const totalSec=totalYears*365.25*24*3600;
  const remainSec=Math.max(totalSec-livedSec,0);

  render("lived", livedSec);
  render("remaining", remainSec);

  document.getElementById("progress").style.width=
    Math.min((livedSec/totalSec)*100,100)+"%";
}

function render(id,sec){
  const y=Math.floor(sec/31557600);
  sec%=31557600;
  const m=Math.floor(sec/2629800);
  sec%=2629800;
  const d=Math.floor(sec/86400);
  sec%=86400;
  const h=Math.floor(sec/3600);
  sec%=3600;
  const min=Math.floor(sec/60);
  sec%=60;

  document.getElementById(id).innerHTML=`
  <div class="unit"><span>${y}</span><small>Years</small></div>
  <div class="unit"><span>${m}</span><small>Months</small></div>
  <div class="unit"><span>${d}</span><small>Days</small></div>
  <div class="unit"><span>${h}</span><small>Hours</small></div>
  <div class="unit"><span>${min}</span><small>Minutes</small></div>
  <div class="unit"><span>${sec}</span><small>Seconds</small></div>`;
}

function snap(id){
  html2canvas(document.getElementById(id)).then(c=>{
    const a=document.createElement("a");
    a.download="lifemeter.png";
    a.href=c.toDataURL();
    a.click();
  });
}
</script>

</body>
</html>
